---
import Scaffolding from "./Scaffolding.astro";

interface Props {
    title: string;
    menuHidden: boolean;
}

const { title, menuHidden = false } = Astro.props;
---

<Scaffolding title={title}>
    <div class="flex flex-col min-h-screen">
        <!-- Navigation Bar -->
        <nav
            id="navbar"
            class={`flex items-baseline justify-between px-6 pt-4 border-b-2 border-white font-[Arial_Black] fixed w-full bg-bg z-100 duration-250 transition-opacity ${menuHidden ? "opacity-0" : "opacity-100"}`}
        >
            <div class="flex items-center gap-4">
                <!-- Decorative Circle -->
                <div class="w-16 h-16 rounded-full clip-circle">
                    <img src="/favicon.png" />
                </div>
                <a href="/" class="text-3xl tracking-wider self-end">
                    DOTY'S SITE
                </a>
            </div>

            <div class="flex items-center gap-8 text-3xl">
                <div class="sm:flex items-center gap-8">
                    <a
                        href="/projects"
                        class="hover:text-gray-300 transition-colors"
                    >
                        PROJECTS
                    </a>
                    <a
                        href="/hobbies"
                        class="hover:text-gray-300 transition-colors"
                    >
                        HOBBIES
                    </a>
                </div>

                <!-- Language Selector -->
                <div class="relative" id="lang-selector">
                    <button
                        id="lang-button"
                        class="flex items-center gap-2 hover:text-gray-300 transition-colors"
                    >
                        <img
                            src="/english.png"
                            alt="UK Flag"
                            class="object-contain h-6"
                        />
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="16"
                            height="16"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            class="w-4 h-4"
                        >
                            <path d="m6 9 6 6 6-6"></path>
                        </svg>
                    </button>

                    <div
                        id="lang-menu"
                        class="absolute right-0 mt-2 py-2 w-48 bg-[#252424] rounded-md shadow-xl hidden"
                    >
                        <a
                            href="#"
                            class="px-4 py-2 hover:bg-[#121212] transition-colors flex items-center justify-between"
                        >
                            English
                            <img
                                src="/english.png"
                                alt="UK Flag"
                                class="object-contain h-4"
                            />
                        </a>
                        <a
                            href="#"
                            class="px-4 py-2 hover:bg-[#121212] transition-colors flex items-center justify-between"
                        >
                            Magyar
                            <img
                                src="/hungary.png"
                                alt="Hungary Flag"
                                class="object-contain h-4"
                            />
                        </a>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Main Content Area -->
        <main class:list={menuHidden ? ["flex-1"] : ["flex-1", "pt-20"]}>
            <slot />
        </main>

        <!-- Footer -->
        <footer class="py-4 text-center text-sm">COPYRIGHT Â© 2025 DOTY</footer>
    </div>
</Scaffolding>

<script>
    // Language selector functionality
    const langButton = document.getElementById("lang-button");
    const langMenu = document.getElementById("lang-menu");
    let isMenuOpen = false;

    langButton?.addEventListener("click", () => {
        isMenuOpen = !isMenuOpen;
        if (langMenu) {
            langMenu.classList.toggle("hidden", !isMenuOpen);
        }
    });

    // Close menu when clicking outside
    document.addEventListener("click", (event) => {
        const langSelector = document.getElementById("lang-selector");
        if (
            langSelector &&
            !langSelector.contains(event.target as Node) &&
            langMenu
        ) {
            isMenuOpen = false;
            langMenu.classList.add("hidden");
        }
    });
</script>
